<!DOCTYPE html>

<html lang="zh-Hant-TW">
    <head><meta name="generator" content="Hexo 3.9.0">
        
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title> 離線閱讀 Android Doc | 只放拖鞋的鞋櫃 </title>
	<meta property="og:title" content=" 離線閱讀 Android Doc | 只放拖鞋的鞋櫃 ">
	<meta name="twitter:title" content=" 離線閱讀 Android Doc | 只放拖鞋的鞋櫃 ">

	<meta property="og:type" content="article">
	<meta name="twitter:card" content="summary">

	<meta name="description" content=" 離線閱讀 Android Doc | 只放拖鞋的鞋櫃 ">
	<meta property="og:description" content=" 離線閱讀 Android Doc | 只放拖鞋的鞋櫃 ">
	<meta name="twitter:description" content=" 離線閱讀 Android Doc | 只放拖鞋的鞋櫃 ">

	<link rel="icon" type="image/x-icon" href="https://jchu.cc/assets/favicon.ico">

	<link rel="image_src" href="https://jchu.cc/assets/default_avatar.jpg">
	<meta property="og:image" content="https://jchu.cc/assets/default_avatar.jpg">

	<link href="https://jchu.cc/atom.xml" title="只放拖鞋的鞋櫃" type="application/atom+xml" rel="alternative">

	<link rel="canonical" href="/2020/12/10-android-doc.html">

	<link rel="stylesheet" href="/asset/css/style.css">

    <link rel="stylesheet" href="/vendors/components-font-awesome/css/font-awesome.css">

    </head>

    <body>
        
    <div class="layout-header">
        <header class="header">
            <div class="layout-logo">
                <div class="panel-logo">

                    <div class="box-logo">
                        <a href="/" title="只放拖鞋的鞋櫃"><img src="/assets/default_avatar.jpg" class="img-logo"></a>
                    </div>
                    <div class="box-main-title">
                        <h2><a href="/">Walkingice</a></h2>
                    </div>
                    <div class="box-sub-title">
                        
                            <p>Julian Chu, love Pixel-art and FF3. FOSS Developer. Co-founder of 0xLab. Join g0v.</p>
                        
                    </div>
                </div>
            </div>

            <div class="layout-menu">
                <div class="menu-group">
                    <nav>
                        <ul class="menu-list">
                            
                            <li class="menu-item">
                                <a href="/">
                                    <i class="fa fa-home gutter-right menu-icon"></i>
                                    <span class="menu-item">首頁</span>
                                </a>
                            </li>
                            
                            
                            <li class="menu-item">
                                <a href="/archives">
                                    <i class="fa fa-archive gutter-right"></i>
                                    <span class="menu-item">文章彙整</span>
                                </a>
                            </li>
                            
                            
                            <li class="menu-item">
                                <a href="/atom.xml">
                                    <i class="fa fa-rss-square gutter-right"></i>
                                    <span class="menu-item">RSS</span>
                                </a>
                            </li>
                            
                        </ul>
                    </nav>
                </div>

                
                <div class="menu-group">
                    <div class="menu-list">
                    
                        <div class="menu-item">
                            <a href="/lamejokes" target="_blank">
                                
                                    <i class="fa fa-comment gutter-right"></i>
                                
                            冷言冷語
                            </a>
                        </div>
                    
                        <div class="menu-item">
                            <a href="https://github.com/g0v" target="_blank">
                                
                                    <i class="fa fa-compass gutter-right"></i>
                                
                            g0v
                            </a>
                        </div>
                    
                    </div>
                </div>
                

                
                <div class="extra-comments">
                    <div>本站無留言功能，有問題或發現錯誤，歡迎到<a href="https://twitter.com/walkingice">twitter</a>戳我，謝謝</div>
                </div>
                

                
                <div class="menu-group deflinks">
                    <div class="menu-list text-center">
                        
                        <a href="https://github.com/walkingice" target="_blank">
                            <i class="fa fa-github-square gutter-right menu-icononly"></i>
                        </a>
                        

                        
                        <a href="https://twitter.com/walkingice" target="_blank">
                            <i class="fa fa-twitter-square gutter-right menu-icononly"></i>
                        </a>
                        

                        

                        

                        

                        

                        

                    </div>
                </div>
                
            </div>

        </header>
    </div>

        <div class="layout-content">
            
<div class="row panel-content">
    

    <div class="article-wrap">
        <article class="content" itemscope itemtype="http://schema.org/Article">
    <h1 class="article-title">
        <a href="/2020/12/10-android-doc.html" itemprop="url" target="_blank">
            <span class>離線閱讀 Android Doc</span>
        </a>
    </h1>

    <p>寫 Android 的程式總是要時時閱讀本草綱目(API documentation)，才會確定應該呼叫哪個 API，就我所知某些人的做法是在 Android Studio 裡面直接看程式碼，不過我還是比較喜歡看精美的 HTML 檔案</p>
<p>雖然很多人是看 online 的版本，不過我從大學時期養成的習慣，還是比較喜歡下載一份 offline 的版本，自己開瀏覽器閱讀。只是這件事情在 Android 上面愈來愈難做到了…</p>
<a id="more"></a>
<p>JAVA JDK 的文件一直都能<a href="https://www.oracle.com/java/technologies/javase-jdk8-doc-downloads.html" target="_blank" rel="noopener">直接下載</a>，但是 Android 我還沒看到這樣的東西，幾年前我還會從 source code 自己 <a href="http://0xwalkingice.blogspot.com/2010/03/javadoc-at-android.html" target="_blank" rel="noopener">make doc</a>，隨著 AOSP 愈來愈癡肥，我也懶得自己生出 javadoc。</p>
<p>在 Android SDK Manager 裡面，可以直接下載 doc。很遺憾地，最近已經無法下載。在 stackoverflow 上頭有人說 <a href="https://stackoverflow.com/a/49262913" target="_blank" rel="noopener">已經不再提供下載</a>，也只能無奈地接受這個很 Google 的現況。</p>
<p>還好網路上還找得到一些 for Zeal 的 offline doc 可以直接下載，湊合著用尚且過得去，哪天受不了了再自己生出一份 doc 吧。Zeal/Dash 都很好，但我不是很喜歡再額外開個 app 來讀文件，如果能在瀏覽器裡面就搞定，我會盡量待在瀏覽器裡頭。</p>
<p>Android doc 雖然很長一段時間可以直接下載，但是有個搜尋的功能在 Android 7 之後在 offline 版本就壞掉了，使得我其實停留在 Android 6 doc 很久，真的需要查詢新的文件我才會開線上版本。</p>
<p>按下 <code>Command + /</code> 之後就能快速搜尋出某一個類別。</p>
<div style="max-width: 100%; margin: auto;"><img src="/2020/12/10-android-doc/search_official.gif"></div>


<p>不過線上版的這個搜尋功能做得很爛，總是先顯示一堆 Guide，殊不知真的來看文件的人，其實要看的是類別的說明，而不是 Guide。</p>
<p>前兩天突然想通，其實要做個簡易版本也不是很難。就先準備好每個頁面的連結與關鍵字的資料，頁面讀完的時候塞個 dom，輸入文字的時候去資料裡面查一下就好</p>
<p>就快速地花一個晚上寫了兩個小小的 script</p>
<ul>
<li><a href="/2020/12/10-android-doc/parser.pl" title="parser.pl">parser.pl</a> - 很簡單的 perl script，搜尋出目錄底下的 html 檔，parse 之後吐到 stdout。所以把輸出的文字 pipe 到一個 js 檔就好</li>
<li><a href="/2020/12/10-android-doc/loader.js_" title="loader.js_">loader.js_</a> - 這個 js 檔會在頁面塞進一個 input DOM，並且拿前述的資料來用</li>
<li>恰好 Android offline doc 的每一頁都會讀進固定的 js 檔，所以把前面兩個 js 檔塞到必讀的 js 檔的最尾端就好了</li>
</ul>
<p>跑起來像這樣</p>
<div style="max-width: 100%; margin: auto;"><img src="/2020/12/10-android-doc/search_mine.gif"></div>

<p>其實還可以寫成 browser extension。不過仔細想想，也不知道多少人會有類似的需求，搞不好只有我會用這麼彆扭的方式開發，所以現在花一個晚上隨便弄弄會動就好，不要花太多力氣在這上面(聳肩)</p>


    
</article>


        <div class="article-meta content">
    <div class="groups">
        <span class="group">
            <a class="archive-item-date" href="https://jchu.cc/2020/12/10-android-doc.html">
                <i class="fa fa-calendar"></i>
                <span itemprop="datePublished" content="2020-12-10">2020-12-10</span>
            </a>
        </span>

        <span class="group">
            
            
                <a href="/categories/geek/">
                    <i class="fa fa-th"></i>
                    <span class>geek</span>
                </a>
            
        </span>

        <span class="group float-right">
            
            
                <a href="/tags/android/">
                    <span class="tag">android</span>
                </a>
            
        </span>
    </div>

</div>



    </div>

    <div class="panel-post-nav">
        <div class="box-post-nav">
            
                <a class="btn" href="/2021/03/04-mayflash.html" title="使用 Mayflash 把舊搖桿接上 Nintendo Switch"><b>使用 Mayflash 把舊搖桿接上 Nintendo Switch</b> &larr; Prev</a>
            
            
                <a class="btn" href="/2020/11/21-markdown.html" title="用 Python 轉換 markdown 至 html">Next &rarr; <b>用 Python 轉換 markdown 至 html</b></a>
            
        </div>
    </div>
</div>


        </div>
        
<div class="layout-footer" style="clear: both">
    <div class="panel-footer">
        <div class="box-footer">
            <footer class="footer">
                
                <a href="http://creativecommons.org/">
                    License: <i class="fa fa-cc"></i> by-nc-sa
                </a>
                
                <p class="theme">Powered by
                    <a href="http://hexo.io/" target="_blank">Hexo</a>,
                    Theme
                    <a href="https://github.com/walkingice/hexo-theme-kaku" target="_blank">Kaku</a>
                </p>
            </footer>
        </div>
    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-2502077-5', 'auto');
    ga('send', 'pageview');
</script>



    </body>
</html>
