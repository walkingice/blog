<!DOCTYPE html>

<html lang="zh-Hant-TW">
    <head>
        
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title> GnuPG åŸºæœ¬è§€å¿µèˆ‡æŒ‡ä»¤ä»‹ç´¹ | åªæ”¾æ‹–é‹çš„é‹æ«ƒ </title>
	<meta property="og:title" content=" GnuPG åŸºæœ¬è§€å¿µèˆ‡æŒ‡ä»¤ä»‹ç´¹ | åªæ”¾æ‹–é‹çš„é‹æ«ƒ " />
	<meta name="twitter:title" content=" GnuPG åŸºæœ¬è§€å¿µèˆ‡æŒ‡ä»¤ä»‹ç´¹ | åªæ”¾æ‹–é‹çš„é‹æ«ƒ ">

	<meta property="og:type" content="article">
	<meta name="twitter:card" content="summary">

	<meta name="description" content=" GnuPG åŸºæœ¬è§€å¿µèˆ‡æŒ‡ä»¤ä»‹ç´¹ | åªæ”¾æ‹–é‹çš„é‹æ«ƒ ">
	<meta property="og:description" content=" GnuPG åŸºæœ¬è§€å¿µèˆ‡æŒ‡ä»¤ä»‹ç´¹ | åªæ”¾æ‹–é‹çš„é‹æ«ƒ " />
	<meta name="twitter:description" content=" GnuPG åŸºæœ¬è§€å¿µèˆ‡æŒ‡ä»¤ä»‹ç´¹ | åªæ”¾æ‹–é‹çš„é‹æ«ƒ " />

	<link rel="icon" type="image/x-icon" href="https://jchu.cc/assets/favicon.ico">

	<!--
	<link rel="image_src" href="" >
	<meta property="og:image" content="" />
	-->

	<link href="https://jchu.cc/atom.xml" title="åªæ”¾æ‹–é‹çš„é‹æ«ƒ" type="application/atom+xml" rel="alternative">

	<link rel="canonical" href="/2022/05/17-gnupg.html">

	<link rel="stylesheet" href="/asset/css/style.css">

    <link rel="stylesheet" href="/vendors/components-font-awesome/css/font-awesome.css">

    <meta name="generator" content="Hexo 5.4.2"></head>

    <body>
        
    <div class="layout-header">
        <header class="header">
            <div class="layout-logo">
                <div class="panel-logo">

                    <div class="box-logo">
                        <a href="/" title="åªæ”¾æ‹–é‹çš„é‹æ«ƒ"><img src="/assets/default_avatar.jpg" class="img-logo"></a>
                    </div>
                    <div class="box-main-title">
                        <h2><a href="/">Walkingice</a></h2>
                    </div>
                    <div class="box-sub-title">
                        
                            <p>Julian Chu, love Pixel-art and FF3. FOSS Developer. Co-founder of 0xLab. Join g0v.</p>
                        
                    </div>
                </div>
            </div>

            <div class="layout-menu-container">

<div class="layout-menu">
    <div class="menu-group">
        <nav>
            <ul class="menu-list">
                
                <li class="menu-item">
                    <a href="/">
                        <i class="fa fa-home gutter-right menu-icon"></i>
                        <span class="menu-item">é¦–é </span>
                    </a>
                </li>
                
                
                <li class="menu-item">
                    <a href="/archives">
                        <i class="fa fa-archive gutter-right"></i>
                        <span class="menu-item">æ–‡ç« å½™æ•´</span>
                    </a>
                </li>
                
                
                <li class="menu-item">
                    <a href="/atom.xml">
                        <i class="fa fa-rss-square gutter-right"></i>
                        <span class="menu-item">RSS</span>
                    </a>
                </li>
                
            </ul>
        </nav>
    </div>

    
    <div class="menu-group">
        <div class="menu-list">
        
            <div class="menu-item">
                <a href="/lamejokes" target="_blank">
                    
                        <i class="fa fa-comment gutter-right"></i>
                    
                å†·è¨€å†·èª
                </a>
            </div>
        
            <div class="menu-item">
                <a href="https://github.com/g0v" target="_blank">
                    
                        <i class="fa fa-compass gutter-right"></i>
                    
                g0v
                </a>
            </div>
        
        </div>
    </div>
    

    
    <div class="extra-comments">
        <div>æœ¬ç«™ç„¡ç•™è¨€åŠŸèƒ½ï¼Œæœ‰å•é¡Œæˆ–ç™¼ç¾éŒ¯èª¤ï¼Œæ­¡è¿åˆ°<a target="_blank" rel="noopener" href="https://twitter.com/walkingice">twitter</a>æˆ³æˆ‘ï¼Œè¬è¬</div>
    </div>
    

    
    <div class="menu-group deflinks">
        <div class="menu-list text-center">
            
            <a href="https://github.com/walkingice" target="_blank">
                <i class="fa fa-github-square gutter-right menu-icononly"></i>
            </a>
            

            
            <a href="https://twitter.com/walkingice" target="_blank">
                <i class="fa fa-twitter-square gutter-right menu-icononly"></i>
            </a>
            

            

            

            

            

            

        </div>
    </div>
    
</div>

</div>

 
        </header>
    </div>

        <div class="layout-content">
            
<div class="row panel-content">
    

    <div class="article-wrap">
        <article class="content" itemscope itemtype="http://schema.org/Article" >
    <h1 class="article-title">
        <a href="/2022/05/17-gnupg.html" itemprop="url" target="_blank">
            <span class="">GnuPG åŸºæœ¬è§€å¿µèˆ‡æŒ‡ä»¤ä»‹ç´¹</span>
        </a>
    </h1>

    <p>GnuPG æ‡‰è©²æ˜¯çµ•å¤§å¤šæ•¸ Linux user æˆ–æ˜¯é–‹ç™¼è€…éƒ½ç”¨éçš„å·¥å…·ã€‚èªªèµ·ä¾†çœŸä¸å¥½æ„æ€ï¼Œåå¤šå¹´å‰å‰›é–‹å§‹å·¥ä½œçš„æ™‚å€™å°±ç”¨éå®ƒï¼Œæ‡µæ‡µæ‡‚æ‡‚æŸ¥äº†å¹¾å€‹å¸¸è¦‹æŒ‡ä»¤å°±æ“ºè‘—ä¸æ”¾ã€‚ç¾åœ¨çµ‚æ–¼æŒ¯ä½œèµ·ä¾†ï¼Œç¨å¾®å¤šèŠ±é»æ™‚é–“ï¼Œé‡æ–°èªè­˜é€™å€‹å·¥å…·</p>
<span id="more"></span>

<p>çœ‹å®Œæ–‡ä»¶ä¹‹å¾Œè¦ºå¾—æœ€å¾Œçš„çµè«–å¾ˆç°¡å–®ï¼Œä½†æ˜¯ä½¿ç”¨å‰è¦å¼„æ¸…æ¥šçš„ä¸€äº›åŸºæœ¬è§€å¿µå››æ•£åœ¨ä¸åŒçš„æ–‡ä»¶ï¼Œè€Œä¸” gpg çš„æŒ‡ä»¤ä»‹é¢ä¹Ÿä¸æ˜¯å¾ˆå‹å–„ï¼Œä½¿å¾—ä¸€é–‹å§‹çš„é–€æª»å¼„å¾—æœ‰é»é«˜ã€‚æˆ‘è©¦è‘—æ•´ç†å‡ºæˆ‘è¦ºå¾—æ¯”è¼ƒå®¹æ˜“ç†è§£çš„é †åº</p>
<h1 id="Gpg-ä½¿ç”¨å±¤çš„åŸºæœ¬é‚è¼¯"><a href="#Gpg-ä½¿ç”¨å±¤çš„åŸºæœ¬é‚è¼¯" class="headerlink" title="Gpg ä½¿ç”¨å±¤çš„åŸºæœ¬é‚è¼¯"></a>Gpg ä½¿ç”¨å±¤çš„åŸºæœ¬é‚è¼¯</h1><p>çœ¾æ‰€çš†çŸ¥ï¼ŒGpg æ˜¯ç”¨ä¾†åšåŠ å¯†ã€ç°½ç« ç­‰ç­‰åŠŸèƒ½çš„å·¥å…·ï¼Œå¾ä½¿ç”¨çš„è§’åº¦ä¾†çœ‹ï¼Œæˆ‘å€‘å¯ä»¥é€™éº¼ç†è§£å®ƒçš„é‚è¼¯</p>
<ul>
<li>æŠ½è±¡æ¦‚å¿µä¸Šï¼ŒGpg æ˜¯ä»¥ã€Œäººçš„èº«ä»½ã€ç‚ºä¸»é«”ä¾†äº’å‹•</li>
<li>ä¸€å€‹äººå¯èƒ½æœ‰ä¸åŒçš„èº«ä»½ï¼Œè­¬å¦‚èªªå·¥ä½œä¸Šçš„åå­—å« Julianï¼Œåœ¨ç¤¾ç¾¤è£¡é¢äº’å‹•åˆå« Walkingice</li>
<li>ä½ å¯ä»¥æŠŠé€™äº›èº«ä»½è·Ÿä½ æœ¬äººåˆä½µèµ·ä¾†ï¼Œä¹Ÿå¯ä»¥å‰µé€ å‡ºä¸€å€‹å…¨æ–°çš„èº«ä»½ï¼Œé”åˆ°åŒ¿åçš„æ•ˆæœ</li>
<li>å½¼æ­¤ç°½ç« çš„æ™‚å€™ï¼Œå¯¦éš›ä¸Šæ˜¯åœ¨åšã€Œé€™å€‹äººå®£ç¨±é€™å€‹èº«ä»½ç‚ºä»–æ‰€æœ‰ï¼Œæˆ‘ä¹ŸåŒæ„é€™å€‹èªªæ³•ã€</li>
<li>æ¯ä¸€å€‹èº«ä»½å°±æ˜¯ç”±ä¸€ä»½ Primary Key pair èˆ‡æ•¸å€‹ Uid çµ„åˆè€Œæˆ</li>
<li>æ¯ä¸€å€‹ Primary Key pair åº•ä¸‹å¯ä»¥æ›è¨±å¤šå€‹ subkey</li>
</ul>
<p>ç•«æˆåœ–ä¾‹å°±æœ‰é»åƒé€™æ¨£</p>
<div style="max-width: 100%;" class="img-row"><img src="/2022/05/17-gnupg/gpg.svg" class=""></div>

<p>èˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘èº«ç‚ºä¸€ä½ä¸­å¹´å¤§å”</p>
<ul>
<li>æˆ‘å¯ä»¥ç”Ÿå‡ºä¸€çµ„ Primary Key pairï¼Œç”¨ä¾†ç•¶ä½œæˆ‘åœ¨ç¤¾æœƒæ´»å‹•çš„èº«ä»½<ul>
<li>å¾å·¥ä½œé–‹å§‹èªè­˜æˆ‘çš„æœ‹å‹ï¼Œç¿’æ…£å«æˆ‘ Julian<ul>
<li>æ‰€ä»¥æˆ‘å¯ä»¥åœ¨é€™å€‹ Primary Key pair åº•ä¸‹å‰µé€ ä¸€å€‹ uid ç‚º <code>Julian</code></li>
</ul>
</li>
<li>å¾ç¤¾ç¾¤é–‹å§‹èªè­˜æˆ‘çš„æœ‹å‹ï¼Œç¿’æ…£å«æˆ‘èµ°å†°<ul>
<li>æ‰€ä»¥æˆ‘å¯ä»¥åœ¨é€™å€‹ Primary Key pair åº•ä¸‹å‰µé€ ä¸€å€‹ uid ç‚º <code>Walkingice</code></li>
</ul>
</li>
<li>å…©é‚Šçš„æœ‹å‹éƒ½çŸ¥é“å«æˆ‘ Julian æˆ–æ˜¯ Walkingiceï¼Œä¸ç®¡ç”¨å“ªå€‹ç¨±è¬‚éƒ½æ²’å•é¡Œ</li>
<li>ä»»ä½•ä¸€é‚Šçš„æœ‹å‹ï¼Œç°½ç« èªè­‰æˆ‘é€™ä»½ Primary Key pairï¼Œæ˜¯åœ¨èªåŒæˆ‘é€™å€‹èº«ä»½<ul>
<li>æ›å¥è©±èªªï¼šã€Œæˆ‘åŒæ„é€™å€‹ Primary Key pair çš„æ‰€æœ‰äººæ˜¯ Julianï¼Œä¹Ÿå°±æ˜¯ Walkingiceã€</li>
</ul>
</li>
</ul>
</li>
<li>ä½†æ˜¯æˆ‘å¯èƒ½åœ¨å¤§å®¶ä¸çŸ¥é“çš„åœ°æ–¹ï¼Œå…¶å¯¦æ˜¯å€‹æœ‰è®Šè£ç™–ï¼Œä¸¦ä»¥æ­¤è³ºå–æ–—å…§ç‚ºç”Ÿçš„è‚¥å®…ï¼Œè€Œé€™å€‹èº«ä»½æˆ‘ä¸æƒ³çµ¦ä»»ä½•è¦ªå‹çŸ¥é“<ul>
<li>æ‰€ä»¥æˆ‘æœƒç”Ÿå‡ºå¦å¤–ä¸€çµ„ Primary Key pairï¼Œç”¨ä¾†ç•¶ä½œæˆ‘åœ¨è³ºçš®è‚‰éŒ¢çš„èº«ä»½<ul>
<li>åœ¨é€™å€‹ Primary key åº•ä¸‹ï¼Œæˆ‘å¯ä»¥å‰µé€ ä¸€å€‹ uid ç‚º <code>FatTuber</code></li>
<li>ç°½ç« èªè­‰æˆ‘é€™å€‹èº«ä»½çš„äººï¼Œå¯¦éš›ä¸Šæ˜¯èªªï¼šã€Œæˆ‘åŒæ„é€™å€‹ Primary Key pair çš„æ‰€æœ‰äººæ˜¯ FatTuberã€</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥æˆ‘å€‘å¯ä»¥çœ‹åˆ°å¹¾å€‹ç‰¹é»</p>
<ul>
<li>æ¯å€‹äººå¯ä»¥å‰µé€ å‡ºä¸åŒçš„èº«ä»½ï¼Œå„å€‹èº«ä»½æ“æœ‰çš„ç¶²çµ¡æ˜¯ç¨ç«‹çš„</li>
<li>æ¯å€‹èº«ä»½è¦ä¸è¦è·Ÿä½ çš„ç¤¾æœƒé—œä¿‚åšé€£çµï¼Œç”±ä½ æ±ºå®šã€‚</li>
<li>ç°½ç« èªè­‰ä¸¦ä¸è¡¨ç¤ºã€Œé€™å€‹äººçœŸçš„æ˜¯é‚£å€‹èº«ä»½ã€ï¼Œå……å…¶é‡åªèƒ½èªªã€Œé€™ç¾¤äººåŒæ„ä»–æ‰€å®£ç¨±çš„èº«ä»½ã€<ul>
<li>è­¬å¦‚èªªæˆ‘ä¹Ÿå¯ä»¥å®£ç¨±æˆ‘æ˜¯ <code>Tony Stark&lt;tony@avenger.universe</code>ï¼Œè€Œä¸”æˆ‘èº«é‚Šä¸€å †äººé‚„çœŸçš„ç°½ç« åŒæ„ï¼Œä½†æˆ‘å¾ˆæ˜é¡¯ä¸æ˜¯</li>
<li>Gpg é‹ä½œçš„é‚è¼¯å°±åƒä¸€èˆ¬ç¤¾æœƒä¸€æ¨£ï¼Œæ‰€ä»¥ä½ è¦æ…é¸ä½ çš„æœ‹å‹ï¼Œä¹Ÿè¦ä»”ç´°æ–Ÿé…Œä½ æœ‹å‹èªªçš„è©±</li>
</ul>
</li>
</ul>
<p>ä½¿ç”¨ Gpg å°±åƒåœ¨çœŸå¯¦ç¤¾æœƒè£¡é¢é‹ä½œä¸€æ¨£ï¼Œä½ è¦é‡è¦–è‡ªå·±æŸå€‹èº«ä»½çš„ reputationï¼Œä¸¦ä¸”å¥½å¥½ç¶“ç‡Ÿå®ƒï¼Œæ‰èƒ½å¤ åœ¨é€™å€‹åˆ†æ•£å¼çš„æ¶æ§‹è£¡é¢ä½œåˆ°èº«ä»½çš„èªè­‰ã€‚</p>
<h1 id="Gpg-è£¡é¢å¸¸è¦‹çš„åè©è§£é‡‹"><a href="#Gpg-è£¡é¢å¸¸è¦‹çš„åè©è§£é‡‹" class="headerlink" title="Gpg è£¡é¢å¸¸è¦‹çš„åè©è§£é‡‹"></a>Gpg è£¡é¢å¸¸è¦‹çš„åè©è§£é‡‹</h1><ul>
<li><p>Key pair</p>
<ul>
<li>public key è·Ÿ private key çš„çµ„åˆ</li>
</ul>
</li>
<li><p>Primary Key pair / Master Key pair</p>
<ul>
<li>ä¸€ä»½äººéš›ç¶²çµ¡é—œä¿‚å°±ç”±ä¸€ä»½ Primary Key pair ä¾†ç®¡ç†</li>
<li>å¤§å¤šæ•¸æƒ…æ³éƒ½åªè¦ä¸€ä»½ Primary Key pair å°±å¥½ï¼Œä½ çš„å€‹äººè²æœ›éƒ½æœƒç´¯ç©åœ¨æ­¤</li>
<li>Primary Key pair çš„ private key ç›¸ç•¶é‡è¦</li>
</ul>
</li>
<li><p>UID / User ID</p>
<ul>
<li>UTF-8 å­—ä¸²ï¼Œç”±ä¸€å€‹åå­—èˆ‡ e-mail çµ„åˆè€Œæˆï¼Œåƒæ˜¯ <code>FooBar (Some comment) &lt;foobar@the.addr&gt;</code></li>
<li>åœ¨ä»»ä½•æŒ‡ä»¤éœ€è¦é€é UID æŒ‡å®šæˆ–æ˜¯æœå°‹çš„æ™‚å€™ï¼Œä¸ç”¨å…¨éƒ¨æ‰“å®Œï¼Œé€šå¸¸ç”¨ä¸€éƒ¨åˆ†ä¹Ÿå¯ä»¥é…å°æˆåŠŸ</li>
<li>æ¯ä¸€çµ„ Primary Key pair åº•ä¸‹å¯ä»¥æœ‰å¥½å¹¾å€‹ UID<ul>
<li>ä½ å¯èƒ½å› ç‚ºæ›å·¥ä½œè€Œæœ‰ä¸åŒçš„ mail address</li>
</ul>
</li>
</ul>
</li>
<li><p>Subkey pair</p>
<ul>
<li>å› ç‚º Primary key pair å¾ˆé‡è¦ï¼Œéœ€è¦å¥½å¥½è—èµ·ä¾†ã€‚æ–¼æ˜¯ç”¢ç”Ÿå…¶ä»–çš„ key pair ä¸¦ä¸”æ›åœ¨ primary åº•ä¸‹ï¼Œæ‰€ä»¥ç¨±ç‚º subkey pair</li>
<li>åœ¨ä¸€çµ„ Primary key pair ä¹‹ä¸‹ï¼Œå¯ä»¥æ›ä¸Šè¨±å¤šä¸åŒçš„ subkey å»åšå„ç¨®ç°½ç« æˆ–åŠ å¯†çš„å¯¦éš›å‹•ä½œ</li>
<li>Primary key pair è·Ÿ subkey pair çš„è³‡è¨Šå®‰å…¨å¼·åº¦ç›¸åŒ (å¦‚æœç”¢ç”Ÿçš„åƒæ•¸ä¸€æ¨£)</li>
</ul>
</li>
<li><p>Key ID</p>
<ul>
<li>16 é€²ä½çš„å­—ä¸²ï¼Œç”¨ä¾†é‘‘åˆ¥ä¸€å€‹ Key</li>
<li>åˆç¨± long key id</li>
<li>å¦‚æœåªæŠ“æœ€å¾Œä¸€éƒ¨åˆ† 16 å€‹å­—å…ƒä¾†çœ‹ï¼Œé€™å€‹å­—ä¸²å°±å« <strong>fingerprint</strong></li>
<li>gpg å–æœ€å¾Œ 8 å€‹å­—å…ƒä¾†ç•¶ fingerprintï¼Œåˆç¨± short key id</li>
</ul>
</li>
<li><p>KeyGrip</p>
<ul>
<li>ç”¨åœ¨ gpg å…§éƒ¨çš„æ±è¥¿ï¼Œ20 bytes çš„ SHA1 å­—ä¸²</li>
<li>ç”¨è™•è·Ÿ fingerprint æœ‰é»åƒ</li>
<li>èˆ‡ protocol ç¨ç«‹ï¼Œæ˜¯ç”¨ key çš„å…¬é–‹è³‡è¨Šç®—å‡º</li>
</ul>
</li>
<li><p>Signing, Certification, Authentication, Encryption</p>
<ul>
<li>Signing: ç”¨ keypair å°æŸä¸€ä»½è³‡æ–™ç°½åï¼Œè®“å…¶ä»–äººèƒ½å¤ ç¢ºèªæ˜¯å¦çœ‹åˆ°è·Ÿæˆ‘ä¸€æ¨£çš„è³‡æ–™</li>
<li>Certification: å°åˆ¥äººçš„ä¸€çµ„ key åš signingï¼Œå°±æ˜¯ Certification / Certify<ul>
<li>åªæœ‰ Primary private key å¯ä»¥ certify å…¶ä»– key</li>
</ul>
</li>
<li>Authentication: èªè­‰ï¼Œå°±åƒå¸¸è¦‹çš„ ssh login</li>
<li>Encryption: ç”¨ key å°è³‡æ–™ä½œåŠ å¯†</li>
</ul>
</li>
</ul>
<h1 id="èˆ‡æŸ¥è©¢æœ‰é—œçš„æŒ‡ä»¤"><a href="#èˆ‡æŸ¥è©¢æœ‰é—œçš„æŒ‡ä»¤" class="headerlink" title="èˆ‡æŸ¥è©¢æœ‰é—œçš„æŒ‡ä»¤"></a>èˆ‡æŸ¥è©¢æœ‰é—œçš„æŒ‡ä»¤</h1><p>å¾ˆå¤šæ“ä½œéƒ½éœ€è¦ç”¨ id å»å®šä½æŸå€‹ keyï¼Œæ‰€å…ˆä»‹ç´¹ä¸€ä¸‹æŸ¥è©¢çš„æŒ‡ä»¤</p>
<ul>
<li>åˆ—å‡º Primary key pair çš„ key id<ul>
<li><code>$ gpg -K</code></li>
<li>å¦‚æœæƒ³çœ‹å…¶ä»–äººçš„ pubkeyï¼Œå°±ç”¨å°å¯« k <code>$ gpg -k</code></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ gpg -K</span><br><span class="line">sec   ed25519 2022-05-12 [SC]</span><br><span class="line">      A12DA4269CD15837F1D1DFF844269415E755ADA0</span><br><span class="line">uid           [ultimate] Foobar (Primary Key for testing GPG) &lt;foobar@testing.gpg&gt;</span><br><span class="line">uid           [ultimate] SecondUid (third) &lt;second@outerspace&gt;</span><br><span class="line">ssb   rsa1056 2022-05-12 [S] [expires: 2022-08-20]</span><br><span class="line">ssb   dsa2048 2022-05-12 [S]</span><br><span class="line">ssb   rsa2016 2022-05-12 [E] [expires: 2023-05-12]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çµ¦çš„è³‡è¨Šå°‘å¾—å¯æ†ã€‚æ—¢ç„¶æˆ‘å€‘ç¶“å¸¸è¦ç”¨åˆ° subkeyï¼Œé‚£éº¼è¦ç”¨ä»€éº¼æŒ‡å®š subkeyï¼Ÿ</p>
<ul>
<li>åˆ—å‡º subkey çš„ fingerprint<ul>
<li><code>$ gpg -K --keyid-format long</code></li>
<li><code>$ gpg -K --with-subkey-fingerprint</code> é€™å€‹ä¹Ÿè¡Œï¼Œåˆ—å‡ºæ¯”è¼ƒé•·çš„ id</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --keyid-format long</span><br><span class="line">sec   ed25519/44269415E755ADA0 2022-05-12 [SC]</span><br><span class="line">      A12DA4269CD15837F1D1DFF844269415E755ADA0</span><br><span class="line">uid                 [ultimate] Foobar (Primary Key for testing GPG) &lt;foobar@testing.gpg&gt;</span><br><span class="line">uid                 [ultimate] SecondUid (third) &lt;second@outerspace&gt;</span><br><span class="line">ssb   rsa1056/2C4FAFA05BC34CC8 2022-05-12 [S] [expires: 2022-08-20]</span><br><span class="line">ssb   dsa2048/96679AF60453EA0B 2022-05-12 [S]</span><br><span class="line">ssb   rsa2016/8AD8E8D104841669 2022-05-12 [E] [expires: 2023-05-12]</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ç¯„ä¾‹ï¼Œ2022/05/12 å°±æœƒéæœŸçš„ RSA key çš„ fingerprint å°±æ˜¯ <code>2C4FAFA05BC34CC8</code>ï¼Œå¾Œé¢æœƒç¶“å¸¸ç”¨åˆ° subkey fingerprint</p>
<ul>
<li>åˆ—å‡º keygrip<ul>
<li><code>$ gpg -K  --with-keygrip</code></li>
<li>æ‡‰è©²æ˜¯ Gpg 2.1 ä¹‹å¾Œï¼Œprivate key å°±æœƒå­˜åœ¨ <code>private-keys-v1.d/[KeyGrip].key</code>ï¼Œæ‰€ä»¥è¦çœ‹ keygrip æ‰çŸ¥é“æ˜¯å°æ‡‰é‚£ä¸€æŠŠ private key</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --homedir=. -K  --with-keygrip</span><br><span class="line">/home/walkingice/temp/gpg/pubring.kbx</span><br><span class="line">-------------------------------------</span><br><span class="line">sec   ed25519 2022-05-12 [SC]</span><br><span class="line">      A12DA4269CD15837F1D1DFF844269415E755ADA0</span><br><span class="line">      Keygrip = 9636425F6158C1C242C52C79AFF07DB2A76637C8</span><br><span class="line">uid           [ultimate] Foobar (Primary Key for testing GPG) &lt;foobar@testing.gpg&gt;</span><br><span class="line">uid           [ultimate] SecondUid (third) &lt;second@outerspace&gt;</span><br><span class="line">ssb   rsa1056 2022-05-12 [S] [expires: 2022-08-20]</span><br><span class="line">      Keygrip = 80ACB61CD079B38A4FBE6B9511BAD1FF90CD1D10</span><br><span class="line">ssb   dsa2048 2022-05-12 [S]</span><br><span class="line">      Keygrip = 0E3D334598E9A2A46450F52035A30348D85776A1</span><br><span class="line">ssb   rsa2016 2022-05-12 [E] [expires: 2023-05-12]</span><br><span class="line">      Keygrip = E7B8746A7A51D69486938458A9B3C68E105791C3</span><br></pre></td></tr></table></figure>

<h1 id="ç®¡ç†-Primary-key-èˆ‡-Subkey"><a href="#ç®¡ç†-Primary-key-èˆ‡-Subkey" class="headerlink" title="ç®¡ç† Primary key èˆ‡ Subkey"></a>ç®¡ç† Primary key èˆ‡ Subkey</h1><p>ç¶²è·¯ä¸Šå…¶ä»–åœ°æ–¹å·²ç¶“å¾ˆå¤šæ•™å­¸äº†ï¼Œæˆ‘é€™é‚Šåªå¤§æ¦‚åˆ—å‡ºå¸¸ç”¨åˆ°çš„æŒ‡ä»¤ç•¶ä½œå‚™å¿˜</p>
<ul>
<li><p>æ–°å¢ primary key pair</p>
<ul>
<li><code>$ gpg --gen-key</code></li>
<li><code>$ gpg --expert --full-gen-key</code> ç”¨æ›´å°ˆå®¶çš„æ¨¡å¼ä¾†ç”¢ç”Ÿ key</li>
</ul>
</li>
<li><p>åˆªé™¤ primary key pair</p>
<ul>
<li><code>$ gpg --delete-secret-keys [UID]</code> å…ˆåˆªé™¤ private key</li>
<li><code>$ gpg --delete-keys [UID]</code> æ¥è‘—åˆªé™¤ public key</li>
</ul>
</li>
<li><p>ç·¨è¼¯ subkey</p>
<ul>
<li>subkey æ˜¯æ›åœ¨ primary key åº•ä¸‹ï¼Œæ‰€ä»¥æ“ä½œéƒ½æ˜¯å¾ã€Œç·¨è¼¯ primary keyã€å‡ºç™¼</li>
<li><code>$ gpg --edit-key [UID]</code> - ç·¨è¼¯é€™å€‹ UID æ‰€é—œè¯çš„ primary key<ul>
<li><code>gpg --expert --edit-key [UID]</code> - ç”¨å°ˆå®¶æ¨¡å¼å¯ä»¥æœ‰æ›´å¤šæ“ä½œé¸é …</li>
</ul>
</li>
<li>æ–°å¢<ul>
<li><code>gpg&gt; addkey</code></li>
</ul>
</li>
<li>åˆªé™¤<ul>
<li><code>gpg&gt; key [SUBKEY fingerprint]</code> - ç‰¹åˆ¥æŒ‡å®šè¦å°é€™å€‹ subkey æ“ä½œ</li>
<li><code>gpg&gt; delkey</code></li>
</ul>
</li>
<li>æ’¤éŠ·/Revoke key<ul>
<li><code>gpg&gt; key [SUBKEY fingerprint]</code> - ç‰¹åˆ¥æŒ‡å®šè¦å°é€™å€‹ subkey æ“ä½œ</li>
<li><code>gpg&gt; revkey</code> - revoke ä¹‹å¾Œè¨˜å¾—è¦é‡æ–° export public key å‘ŠçŸ¥å…¶ä»–äºº</li>
</ul>
</li>
</ul>
</li>
<li><p>åŒ¯å‡ºä¸¦åˆªé™¤ primary private key</p>
<ul>
<li>åŒ¯å‡º primary private key åˆ°æª”æ¡ˆ <code>primary_private_key.gog</code> ä¸¦ä¸”æ‹¿åˆ°åˆ¥çš„åœ°æ–¹å¥½å¥½ä¿å­˜</li>
<li><code>$ gpg -o primary_private_key.gpg --armor --export-secret-keys [KEY_ID]</code></li>
<li>å‚™ä»½å®Œå‚™ï¼Œæ¥è‘—åœ¨ gpg ç®¡è½„ç¯„åœå…§åˆªé™¤ primary private key</li>
<li><code>$ rm private-keys-v1.d/[Primary KeyGrip]</code> - v2.1 ä¹‹å¾Œç›´æ¥ç æ‰æª”æ¡ˆå°±è¡Œäº†</li>
<li>ç¢ºèªä¸€ä¸‹ï¼Œæ‰“ <code>$ gpg -K</code> æœƒçœ‹åˆ° private key å‰é¢çš„ <code>sec</code> è®Šæˆ <code>sec#</code></li>
</ul>
</li>
<li><p>åŒ¯å‡º subkey private key</p>
<ul>
<li>å¦‚æœä½ æƒ³è¦å‚™ä»½ subkey çš„ private keyï¼ŒåŒ¯å‡ºçš„æ–¹å¼æœƒæœ‰é»ä¸åŒ</li>
<li><code>$ gpg -o sub_prikeys.gpg --armor --export-secret-subkey [KEY_ID]</code> - åŒ¯å‡ºæ‰€æœ‰çš„ subkey private keys</li>
<li><code>$ gpg -o sub_prikeys.gpg --armor --export-secret-subkey [SUBKEY_FINGERPRINT]!</code> - åªåŒ¯å‡ºæŸä¸€æŠŠ subkey private keyï¼Œæ³¨æ„é‚£å€‹é©šå˜†è™Ÿ</li>
</ul>
</li>
<li><p>åŒ¯å…¥ primary private key</p>
<ul>
<li>éœ€è¦æŠŠ primary private key æ‰¾å›ä¾†çš„æ™‚å€™ï¼ŒæŠŠä¹‹å‰åŒ¯å‡ºçš„æª”æ¡ˆé‡æ–°åŒ¯å…¥å³å¯</li>
<li><code>$ gpg --import primary_private_key.gpg</code></li>
</ul>
</li>
</ul>
<p>ç‚ºä»€éº¼è¦éº»ç…©åœ°æŠŠ primary private key è—èµ·ä¾†ï¼Ÿ</p>
<p>é€™æŠŠ key å¯èƒ½æ“æœ‰ä½ ç¶“å¹´ç´¯æœˆæ‰€ç´¯ç©çš„è²æœ›ï¼Œç”¨é€™æŠŠ key ç°½ç½²éå¹¾ç™¾äººï¼Œä¹Ÿå¯èƒ½è·Ÿå¹¾ç™¾äººéƒ½äº¤æ›éã€‚å¦‚æœå“ªå¤©è¦å‡ºå·®å»é«˜é¢¨éšªçš„åœ°æ–¹ï¼Œé›»è…¦å¯èƒ½æœƒé­ç«Šæˆ–æ˜¯è¢«ç ´å£ï¼Œæˆ‘å€‘ä¸æœƒå¸Œæœ›é€™æŠŠç§é‘°å°±é€™æ¨£æ¯€æ–¼ä¸€æ—¦ã€‚åˆ©ç”¨ subkey çš„æ©Ÿåˆ¶ï¼Œå¯ä»¥æŠŠ primary key åœ¨å¤§å¤šæ•¸æƒ…æ³éƒ½è—èµ·ä¾†ï¼Œä¸»è¦ä½¿ç”¨ subkey ä¾†åŠ å¯†æˆ–æ˜¯ç°½åã€‚å³ä½¿ subkey éºå¤±æˆ–æ˜¯è¢«ç«Šç›œï¼Œé‚„èƒ½å¤ è«‹å‡ºæœ€æ¬Šå¨çš„ primary ä¾†å®£ç¨±æŸæŠŠ subkey å·²ç¶“å¤±æ•ˆ</p>
<p><a target="_blank" rel="noopener" href="https://wiki.debian.org/Subkeys">Debian é€™ç¯‡ Subkeys</a> è§£é‡‹äº†åŸå› ï¼Œä¸¦ä¸”åˆ—å‡ºå“ªäº›æƒ…æ³æ‰æœƒéœ€è¦ç”¨åˆ° primary private key</p>
<ul>
<li>ä½ è¦ç°½ç½²èªåŒåˆ¥äººçš„ keyï¼Œæˆ–æ˜¯è¦æ’¤éŠ·æ‰‹ä¸Šçš„æŸå€‹ key<ul>
<li>when you sign someone elseâ€™s key or revoke an existing signature,</li>
<li>when you revoke or generate a revocation certificate for the complete key</li>
</ul>
</li>
<li>ä½ è¦ç·¨è¼¯ UID<ul>
<li>when you add a new UID or mark an existing UID as primary,</li>
<li>when you change the preferences (e.g., with setpref) on a UID,</li>
</ul>
</li>
<li>ä½ éœ€è¦ç·¨è¼¯ subkey<ul>
<li>when you create a new subkey,</li>
<li>when you revoke an existing UID or subkey,</li>
<li>when you change the expiration date on your primary key or any of its subkey, or</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥å»ºæ§‹ key çš„æµç¨‹æœƒæœ‰é€™ç¨®æ–¹å¼</p>
<ol>
<li>ç”¢ç”Ÿä¸€çµ„ primary key pair<ul>
<li>å› ç‚ºä¸æœƒç›´æ¥æ‹¿å®ƒåšæª”æ¡ˆåŠ å¯†æ‰€ä»¥ä¸ç”¨æ“”å¿ƒæ•ˆç‡ï¼Œé¸å®šæœ€é›£çš„åŠ å¯†æ¼”ç®—æ³•ï¼Œé•·åº¦ç”¨åˆ°æœ€å¤§</li>
</ul>
</li>
<li>ç”¢ç”Ÿå¹¾çµ„å°ˆé–€æ‹¿ä¾†åŠ å¯†æˆ–æ˜¯ç°½åçš„ subkey</li>
<li>åŒ¯å‡º primary private key å°‡å…¶å¥½å¥½ä¿å­˜</li>
<li>åˆªæ‰ gpg è£¡é¢çš„ primary private key</li>
<li>ä½¿ç”¨ subkey åšå¸¸è¦‹çš„å·¥ä½œ</li>
<li>éœ€è¦ç”¨åˆ° primary private key çš„æ™‚å€™ï¼Œæ‰æš«æ™‚å°‡å…¶åŒ¯å…¥ï¼Œç”¨å®Œå†åˆªæ‰</li>
</ol>
<h1 id="è·Ÿåˆ¥äººäº¤æ›-key"><a href="#è·Ÿåˆ¥äººäº¤æ›-key" class="headerlink" title="è·Ÿåˆ¥äººäº¤æ› key"></a>è·Ÿåˆ¥äººäº¤æ› key</h1><p>ç”¨ gpg çµ‚ç©¶ä¸æœƒæ˜¯è‡ªå·±ä¸€å€‹äººç©ï¼Œç¸½æ˜¯è¦è·Ÿåˆ¥äººäº¤æµã€‚æ‰€ä»¥é›™æ–¹æœƒäº¤æ› pubkey æ”¾åˆ°è‡ªå·±çš„ gpg database è£¡é¢</p>
<ul>
<li><p>åŒ¯å‡ºè‡ªå·±çš„ pubkey</p>
<ul>
<li><code>$ gpg --output my-pubkey.gpg --export [UID]</code> - åŒ¯å‡ºæ‰€æœ‰çš„ pubkeys</li>
<li><code>$ --output my-single-pubkey.gpg --export [SUBKEY_FINGERPRINT]!</code> - åªåŒ¯å‡ºæŸå€‹ subkey çš„ pubkey</li>
</ul>
</li>
<li><p>åŒ¯å…¥åˆ¥äººçš„ pubkey</p>
<ul>
<li><code>$ gpg --import friend_pubkey.gpg</code></li>
</ul>
</li>
</ul>
<p>å–®å–®æŠŠåˆ¥äººçš„ pubkey æ”¾é€²è‡ªå·±çš„ database é‚„ä¸å¤ ï¼Œé‚„éœ€è¦ç”¨æˆ‘å€‘è‡ªå·±çš„äººæ ¼å»ä¿è­‰é€™æŠŠ pubkey æ˜¯ä¸æ˜¯çœŸçš„ç”±æŸå€‹èªè­˜çš„äººç™¼å‡º</p>
<ul>
<li>ç¢ºèªåŒ¯å…¥çš„ pubkey<ul>
<li><code>$ gpg -k</code> ç¢ºèªä¸€ä¸‹ã€Œæœ‹å‹ã€çš„ pubkey å·²ç¶“æ”¾é€²å»ï¼Œå‡è¨­ã€Œæœ‹å‹ã€çš„åå­—æ˜¯ <code>the_friend</code></li>
<li><code>$ gpg --edit-key the_friend</code> - é–‹å§‹ç·¨è¼¯ã€Œæœ‹å‹ã€çš„ key</li>
<li><code>gpg&gt; fpr</code> - ç¢ºèªä¸€ä¸‹ã€Œæœ‹å‹ã€çš„ fingerprint å°ä¸å°</li>
<li><code>gpg&gt; uid friend_the_one</code> - ã€Œæœ‹å‹ã€æœ‰å¾ˆå¤š UIDï¼Œæˆ‘æƒ³é‡å° <code>friend_the_one</code> é€™å€‹ UID åšç°½å</li>
<li><code>gpg&gt; sign</code> - é€²è¡Œç°½åèªè­‰ï¼Œæˆ–æ˜¯ç”¨ <code>lsign</code> åªåœ¨ local ç«¯ç°½åã€‚ç¢ºèªé€™ä»½ pubkey å°±æ˜¯ç”±ã€Œæœ‹å‹ã€æ‰€æ“æœ‰</li>
<li><code>gpg&gt; save</code></li>
</ul>
</li>
</ul>
<p>å¦‚æœä½ éœ€è¦è¦ªè‡ªè·Ÿæ¯å€‹ gpg user è¦‹é¢ï¼Œç¢ºèªå°æ–¹çš„èº«ä»½ä¹‹å¾Œæ‰ç°½åèªè­‰ï¼Œé•·ä¹…ä¸‹ä¾†æ•ˆç‡ä½è½ã€‚å¯ä»¥åˆ©ç”¨é€éå…¶ä»–äººèªè­‰éçš„çµæœä¾†ç°¡åŒ–æµç¨‹ã€‚è­¬å¦‚èªªæœ‰å€‹å« Kenji çš„äººåšäº‹ç¸½æ˜¯ä¸ä»”ç´°ï¼Œæ‰€ä»¥ä»–èªè­‰éçš„äººæˆ‘éƒ½ä¸é¡˜æ„ç›¸ä¿¡ã€‚ä½†æ˜¯æˆ‘å®Œå…¨ç„¡æ¢ä»¶ç›¸ä¿¡ã€Œæœ‹å‹ã€æ‰€èªè­‰çš„ä»»ä½•äººï¼Œæ‰€ä»¥æˆ‘å¯ä»¥é‡å° Kenji è·Ÿã€Œæœ‹å‹ã€è¨­å®šä¸åŒçš„ trust ç¨‹åº¦</p>
<ul>
<li>ä¿®æ”¹ trust<ul>
<li><code>$ gpg --edit-key the_friend</code></li>
<li><code>gpg&gt; trust</code></li>
<li><code>gpg&gt; save</code></li>
</ul>
</li>
</ul>
<p>ä½†æ˜¯æ™‚é–“ä¹…äº†ï¼Œè¦æ€éº¼çŸ¥é“æˆ‘å€‘æ‰€è¨­å®šçš„ trust ç¨‹åº¦å‘¢ï¼Ÿedit key çš„æ™‚å€™å°±èƒ½çœ‹è¦‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pub  rsa3072/58C7791869454109</span><br><span class="line">     created: 2022-05-12  expires: 2024-05-11  usage: SC</span><br><span class="line">     trust: ultimate      validity: ultimate</span><br></pre></td></tr></table></figure>

<p>ä¸Šæ–¹çš„ä¾‹å­ï¼Œtrsut çš„ç¨‹åº¦å°±æ˜¯ <code>ultimate</code>ï¼Œã€Œæœ‹å‹ã€çš„è©±å°±æ˜¯å°çš„ï¼ğŸ‘†</p>
<p>äº¤æ› public key å¦‚æœå…¨éƒ¨éƒ½è¦ç”¨ e-mail ä¹‹é¡çš„æ–¹æ³•å‚³éï¼Œé‚£å°±å¤ªç´¯äººäº†ã€‚é€šå¸¸å°±æœƒæ‰¾ä¸€å€‹ keyserverï¼Œå¤§å®¶æŠŠ public key å‚³ä¸Šå»ï¼Œæˆ–å¾é‚£é‚ŠæŠ“ä¸‹æŸå€‹äººçš„ public keyï¼Œç¢ºèªç„¡èª¤ä¹‹å¾Œå† signã€‚åˆæˆ–è‘—ï¼Œä½ å°è‡ªå·±çš„ key åšå‡ºä»€éº¼è®Šæ›´ï¼Œä¹Ÿå¯ä»¥å‚³ä¸Š serverã€‚åˆ¥äººå°±èƒ½å¾é€™å€‹ server æŠ“ä¸‹ä½ çš„æ›´æ–°</p>
<ul>
<li>é€å‡º public key åˆ° server<ul>
<li><code>$ gpg --send-keys [KEY_ID]</code> - é€å‡ºé€™ä¸€çµ„çš„ public key<ul>
<li>ä½†æœ‰æ™‚å€™æœƒé‡åˆ° <code>gpg: keyserver send failed: Server indicated a failure</code> ï¼Œé‚£å¯èƒ½å°±æ˜¯ä½ æŒ‡å®šçš„ keyserver æ›äº†ã€‚</li>
<li>ubuntu çš„ key server å¥½åƒä¹Ÿæ»¿å¸¸ç”¨åˆ°</li>
<li><code>$ gpg --keyserver keyserver.ubuntu.com --send-keys [KEY_ID]</code> - é€å‡ºé€™ä¸€çµ„çš„ public key åˆ° ubuntu key server</li>
<li>å¦‚æœä½ æƒ³ä»¥å¾Œéƒ½ç”¨ ubuntu çš„ key serverï¼Œå¯ä»¥åœ¨ <code>~/.gnupg/gpg.conf</code> è£¡é¢åŠ ä¸Š <code>keyserver hkp://keyserver.ubuntu.com</code></li>
</ul>
</li>
</ul>
</li>
<li>å¾ server ä¸‹è¼‰ public key<ul>
<li><code>$ gpg --recv-keys [KEY_ID]</code></li>
</ul>
</li>
</ul>
<h1 id="åŠ å¯†ã€è§£å¯†èˆ‡ç°½å"><a href="#åŠ å¯†ã€è§£å¯†èˆ‡ç°½å" class="headerlink" title="åŠ å¯†ã€è§£å¯†èˆ‡ç°½å"></a>åŠ å¯†ã€è§£å¯†èˆ‡ç°½å</h1><p>å‰é¢åƒè¾›è¬è‹¦çµ‚æ–¼æŠŠ keys éƒ½æå®šäº†ï¼Œç¾åœ¨é–‹å§‹çœŸæ­£ä½¿ç”¨ gpg ä¾†åšæ­£äº‹</p>
<ul>
<li><p>é‡å°æŸå€‹æ–‡å­—æª”æ¡ˆåšç°½å</p>
<ul>
<li>ç”¢ç”Ÿä¸€å€‹æ–°çš„å¯è®€æ–‡å­—æª”æ¡ˆï¼ŒæŠŠåŸæª”çš„æ±è¥¿æ”¾é€²å»ï¼ŒåŒæ™‚ä¹ŸæŠŠç°½ç« çš„è³‡è¨Šæ”¾é€²å»</li>
<li><code>$ gpg --clear-sign [Filename]</code> - ä¸å½±éŸ¿åŸæª”æ¡ˆï¼Œé¡å¤–ç”¢ç”Ÿ <code>[Filename].asc</code></li>
<li><code>$ gpg -u [SUBKEY_FINGERPRINT]! --clear-sign [Filename]</code> - å¦‚æœæœ‰å¤šå€‹ subkeyï¼Œä½¿ç”¨é©šå˜†è™ŸæŒ‡å®šæŸå€‹ subkey ä¾† signï¼Œ<ul>
<li>ä¹Ÿå¯ä»¥åœ¨ <code>gpg.conf</code> è£¡é¢å¯«ä¸Š <code>default-key [SUBKEY_FINGERPRINT]!</code> ç•¶ä½œé è¨­ä½¿ç”¨çš„ subkey</li>
</ul>
</li>
<li>é©—è­‰ç°½å<ul>
<li><code>$ gpg --verify [Filename].asc</code></li>
</ul>
</li>
</ul>
</li>
<li><p>åƒ…åƒ…åªç”¢ç”Ÿä¸€å€‹é¡å¤–çš„ç°½ç« è³‡è¨Š</p>
<ul>
<li>å°æ–¹æ”¶åˆ°æª”æ¡ˆä¹‹å¾Œï¼Œå†æ ¹æ“šé€™å€‹ç°½ç« çš„è³‡è¨Šé©—è­‰æª”æ¡ˆæ˜¯ä¸æ˜¯çœŸçš„ä¾†è‡ªä½ </li>
<li><code>$ gpg --sign --detach-sign [Filename]</code>   ç”¢ç”Ÿ <code>[Filename].sig</code>ï¼ŒæŠŠç°½åè·Ÿæª”æ¡ˆæœ¬é«”åˆ†é–‹ä¾†</li>
<li>é©—è­‰ç°½å<ul>
<li><code>$ gpg --verify [Filename].sig [Filename]</code></li>
</ul>
</li>
</ul>
</li>
<li><p>å°ç¨±å¼åŠ è§£å¯†</p>
<ul>
<li>å°±æ˜¯ä¸€èˆ¬å¸¸è¦‹çš„ç”¨å¯†ç¢¼åŠ å¯†ï¼Œå…¶å¯¦è¦ç”¨é€™æ‹›çš„è©±ï¼Œä¹Ÿä¸éœ€è¦æä¸€å † key äº†</li>
<li><code>$ gpg -c [Filename]</code></li>
<li>æˆ–æ˜¯ <code>$ gpg --symmetric [Filename]</code></li>
<li>æœƒç”¢ç”Ÿ <code>[Filename].gpg</code></li>
</ul>
</li>
<li><p>ç”¨å°æ–¹çš„ public key åŠ å¯†</p>
<ul>
<li><code>$ gpg --encrypt -r [UID] [Filename]</code> - æŒ‡å®š recipient ç‚º UIDï¼Œæœƒç”¢ç”ŸåŠ å¯†æª”æ¡ˆ <code>[Filename].gpg</code></li>
<li>å¦‚æœå°æ–¹æœ‰å¾ˆå¤šæŠŠ subkeyï¼Œæƒ³è¦ç”¨å…¶ä¸­ä¸€æŠŠ subkey åŠ å¯†</li>
<li><code>$ gpg --encrypt -r [Recipient&#39;s Public Subkey Fingerprint]! [Filename]</code> - æ³¨æ„ subkey å¾Œé¢æœ‰å€‹é©šå˜†è™Ÿï¼Œé©šå˜†è™Ÿå°±æ˜¯ç”¨ä¾†æŒ‡å®š fingerprint</li>
</ul>
</li>
<li><p>ç”¨è‡ªå·±çš„ private key åŠ å¯†ï¼Œè®“å°æ–¹å¯ä»¥ç”¨æˆ‘çš„ public key è§£å¯†</p>
<ul>
<li>å…¶å¯¦ï¼Œé€™å°±æ˜¯å°é€™å€‹æª”æ¡ˆåšç°½ç« ï¼Œä¸¦ä¸”ä¸è¦æŠŠç°½ç« çš„è³‡è¨Šé¡å¤–æ”¾åˆ°åˆ¥çš„æª”æ¡ˆ</li>
<li><code>$ gpg --sign [Filename]</code></li>
</ul>
</li>
<li><p>å¦‚æœæ‰‹ä¸Šæœ‰å°æ–¹çš„ pubkeyï¼Œä¸æƒ³è¦æŠŠå°æ–¹çš„ pubkey åŠ åˆ° database è£¡é¢ï¼Œä¹Ÿèƒ½ç”¨ pubkey æª”æ¡ˆä¾†åŠ å¯†</p>
<ul>
<li><code>gpg --encrypt -f [Recipient PubKey Filename] [Filename]</code><ul>
<li>å¦‚æœé€™å€‹æª”æ¡ˆåŒ…äº†å¥½å¹¾å€‹ pubkeyï¼Œé‚£éº¼ gpg æ‡‰è©²æœƒç”¨æœ€æ–°çš„é‚£å€‹</li>
<li>æ‰€ä»¥å°æ–¹æœ€å¥½æ˜¯åªçµ¦ä¸€å€‹ pubkey</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="æª”æ¡ˆç®¡ç†èˆ‡å‚™ä»½"><a href="#æª”æ¡ˆç®¡ç†èˆ‡å‚™ä»½" class="headerlink" title="æª”æ¡ˆç®¡ç†èˆ‡å‚™ä»½"></a>æª”æ¡ˆç®¡ç†èˆ‡å‚™ä»½</h1><p>é™¤äº†ä½¿ç”¨ gpgï¼Œå¦¥å–„åœ°ç®¡ç†æª”æ¡ˆä»¥åŠå‚™ä»½ä¹Ÿå¾ˆé‡è¦ã€‚ä¸éæˆ‘å€‹äººæ¯”è¼ƒæ‡¶æƒ°ï¼Œé€šå¸¸æ˜¯ç›´æ¥å‚™ä»½æ•´å€‹å·¥ä½œç›®éŒ„ï¼Œæ¯”è¼ƒæŒ‘æƒ•çš„äººå¯ä»¥ç¨å¾®ç†è§£ä¸€ä¸‹ç›®éŒ„åº•ä¸‹å“ªäº›æª”æ¡ˆæ˜¯åšä»€éº¼çš„</p>
<p>gpg çš„é è¨­å·¥ä½œç›®éŒ„æ˜¯ <code>~/.gnupg</code>ï¼Œä¹Ÿèƒ½ç”± <code>--homedir</code> æˆ–æ˜¯ç’°å¢ƒè®Šæ•¸ <code>GNUPGHOME</code> ä¾†æŒ‡å®šå…¶ä»–åœ°æ–¹ç‚ºå·¥ä½œç›®éŒ„ã€‚æˆ‘åœ¨è®€æ–‡ä»¶çš„æ™‚å€™ï¼Œå°±æ˜¯ç”¨ <code>--homedir</code> ä¾†ç·´ç¿’ã€‚ä¸éè¦æ³¨æ„ï¼Œgpg æœƒè·‘èµ·ä¸€å€‹ daemon <code>gpg-agent</code>ï¼Œå®ƒæœƒæš«å­˜ä¸€äº›è³‡è¨Šï¼Œè­¬å¦‚èªªè¼¸å…¥çš„ passphraseï¼Œæœ‰æ™‚å€™éœ€è¦ç æ‰é€™å€‹ daemon æ¸…å…‰ cacheã€‚</p>
<p>åœ¨ 2.1 ä¹‹å¾Œå°±ä¸ç”¨ <code>secring.gpg</code> é€™å€‹æª”æ¡ˆäº†ã€‚åˆ†é–‹ç¶­è­· public keyring è·Ÿ private keyring å¸¸å¸¸æœƒå¼•èµ·å•é¡Œï¼Œæ‰€ä»¥åœ¨ gpg 2.1 ä¹‹å¾Œï¼Œå…¨éƒ¨æŠŠå·¥ä½œéƒ½äº¤çµ¦äº† gpg-agent (çœŸæ­£çš„ encryption engine)ä¾†åš</p>
<ul>
<li><code>pubring.kbx</code><ul>
<li><strong>éœ€è¦å‚™ä»½</strong></li>
<li>public key box</li>
<li>v2.1 ä¹‹å¾Œæ–°å¢çš„ <a target="_blank" rel="noopener" href="https://www.gnupg.org/faq/whats-new-in-2.1.html#nosecring">https://www.gnupg.org/faq/whats-new-in-2.1.html#nosecring</a></li>
<li>çµ¦ <code>gpgsm</code> å…±äº«ä½¿ç”¨ã€‚(<code>man gpgsm</code>)ï¼Œæ‰€ä»¥é€™å€‹æª”æ¡ˆå¯èƒ½åœ¨æ—©å°±è¢«ç”¢ç”Ÿäº†</li>
</ul>
</li>
<li><code>openpgp-revocs.d</code><ul>
<li><strong>éœ€è¦å‚™ä»½</strong></li>
<li>è£¡é¢çš„æ±è¥¿å¯ä»¥ç”¨ä¾† revoke æ­£åœ¨ä½¿ç”¨çš„ keyï¼Œæ‰€ä»¥æœ€å¥½åˆ†é–‹å­˜æ”¾ï¼Œæˆ–æ˜¯å°å‡ºä¾†æ”¶è—</li>
</ul>
</li>
<li><code>private-keys-v1.d</code><ul>
<li><strong>éœ€è¦å‚™ä»½</strong></li>
<li><code>gpg-agent</code> æœƒæŠŠ private key å­˜åœ¨é€™è£¡é¢</li>
</ul>
</li>
<li><code>trustdb.gpg</code><ul>
<li>ä¸éœ€è¦å‚™ä»½</li>
<li>trust database</li>
<li>çœŸçš„è¦å‚™ä»½ï¼Œæœƒç”¨ <code>--export-ownertrust</code> åŒ¯å‡ºæª”æ¡ˆ</li>
</ul>
</li>
</ul>
<h1 id="å¾Œè©±é–’è«‡"><a href="#å¾Œè©±é–’è«‡" class="headerlink" title="å¾Œè©±é–’è«‡"></a>å¾Œè©±é–’è«‡</h1><p>å‰ä¸€é™£å­åœ¨æƒ³ï¼Œæ•¸ä½è³‡ç”¢çš„æ‰€æœ‰æ¬Š(æš«ä¸”å…ˆä¸ç®¡ã€Œæ‰€æœ‰æ¬Šã€çš„åš´æ ¼å®šç¾©)èªè­‰ç›®å‰éƒ½æ˜¯ç¶å®šåœ¨ç¶²ç«™çš„å¸³è™Ÿä¹‹ä¸Šï¼Œå¯æ˜¯æˆ‘å€‘è¨»å†Šå¸³è™Ÿçš„æ™‚å€™å¾€å¾€è¦æä¾›ä¸€å€‹ e-mailï¼Œé€™å¹´é ­è¨±å¤šäºº(åŒ…æ‹¬æˆ‘)éƒ½æ˜¯ç›´æ¥ç”¨ gmailã€‚å¦‚æœæˆ‘çš„ gmail å¸³è™Ÿå› ç‚ºä»»ä½•åŸå› è€Œè¢«åœæ¬Šï¼Œä¹Ÿä»£è¡¨æˆ‘æœ‰é¢¨éšªå¤±å»åœ¨æŸå€‹ç¶²ç«™ä¸Šé¢çš„æ•¸ä½è³‡ç”¢ã€‚å¦‚æœæˆ‘æƒ³è¦è‡ªå·±æ¶ mail server çµ¦è‡ªå·±ç™¼ e-mail å¸³è™Ÿï¼Œå¯¦éš›ä¸Šæˆ‘çš„ domain name ä¹Ÿæ˜¯è¢«æŸå€‹ç¶²è·¯å·¨é ­æ‰€æŒæ§ã€‚å¦‚æœæƒ³è¦è­‰æ˜ç™»å…¥çš„äººçœŸçš„æ˜¯ã€Œæˆ‘ã€ï¼Œä¼¼ä¹éƒ½è¦è¢«æŸå€‹ç¶²è·¯å·¨é ­ç®åˆ¶ï¼Ÿ</p>
<p>ã€Œå¦‚ä½•åœ¨ç¶²è·¯ä¸Šè­‰æ˜è‡ªå·±çš„èº«ä»½ï¼Œè€Œä¸å€šé å¤§å…¬å¸çš„æœå‹™ï¼Ÿé€™ä¸å°±æ˜¯ GnuPGï¼Ÿï¼ã€æ˜¯å•Šï¼Œé€™å€‹å•é¡Œæ—©å°±æœ‰å€‹è§£æ³•äº†ã€‚</p>
<p>æœ€è¿‘å¹¾å¹´å¤§å®¶å°ã€Œç¶²è·¯å·¨é ­ã€å¾ˆä¸ä¿¡ä»»ï¼Œä¸éæˆ‘èº«ç‚ºé€™å€‹è¡Œæ¥­è£¡é¢çš„ä¸€å“¡ï¼Œé›–ç„¶æœ‰é»æé˜²ä½†ä¹Ÿæ²’æœ‰åˆ°å¾ˆç·Šç¹ƒçš„ç¨‹åº¦ï¼Œå°æ–¼æ°‘ä¸»åœ‹å®¶è£¡é¢æ¯”è¼ƒæœ‰è²è­½çš„å¤§å…¬å¸ï¼Œå…¶å¯¦æˆ‘é‚„æ˜¯æœ‰ä¸€å®šç¨‹åº¦çš„ä¿¡ä»»ï¼Œä¹Ÿå› æ­¤æˆ‘å°ã€Œå®Œå…¨å»ä¸­å¿ƒåŒ–ã€é€™ç¨®ç›®æ¨™ä¸¦ä¸æ˜¯å¾ˆæœ‰èˆˆè¶£ã€‚</p>
<p>å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘é‚„æ˜¯å¼·çƒˆåŒæ„ä¸¦ä¸»å¼µï¼Œ<strong>äººå€‘æ‡‰è©²è¦æœ‰å€‹å¯ä»¥é©—è­‰è‡ªå·±çš„æ–¹æ³•ï¼Œä¸å—å¤§å…¬å¸çš„é™åˆ¶</strong></p>
<p>ç”¨ gpg çš„ä¾‹å­ä¾†èªªï¼Œå°±æ˜¯æˆ‘å¯ä»¥ç”¨ gpg subkey ä¾†è¨»å†Šå¸³è™Ÿï¼Œè€Œéä½¿ç”¨ e-mailã€‚è¨»å†Šå¸³è™Ÿåªæ˜¯ä¾‹å­ï¼Œå…¶å¯¦æ³›æŒ‡çš„æ˜¯ä»»ä½•éœ€è¦ authenticate çš„äº‹æƒ…ã€‚é€™åªæ˜¯å€‹ç†æƒ³ï¼Œè€Œç¾å¯¦çš„å…¶ä¸­ä¸€å€‹é—œå¡å°±æ˜¯ï¼Œgpg çœŸçš„å¾ˆé›£ç”¨ã€‚</p>
<p>Gpg æŒ‡ä»¤é›£ç”¨ä¹‹ä¸€åœ¨æ–¼ï¼Œå®ƒæœƒæ•…ä½œè°æ˜åœ°å¹«ä½ æ‰¾ä¸€å † fallbackï¼Œç¶“å¸¸ä½ æéŒ¯ keyid æˆ–æ˜¯ fingerprintï¼Œå¿˜è¨˜åŠ ä¸Šé©šå˜†è™Ÿéƒ½æœƒå‹•ï¼Œæˆ–è‘—åœ¨ conf è£¡é¢è¨­å®šéŒ¯èª¤çš„ default-keyï¼Œé€™äº›å¼„éŒ¯éƒ½é‚„æ˜¯æœƒå‹•ï¼Œä½†æ˜¯çµæœè·Ÿä½ é æœŸçš„ä¸å¤§ä¸€æ¨£ã€‚å¾å¤§å­¸å°±å–œæ­¡ç”¨ Linux command line çš„æˆ‘ï¼Œä¾ç„¶è¦ºå¾— gpg çš„æŒ‡ä»¤å¾ˆåäººé¡ã€‚å®ƒçš„åŠŸèƒ½å¾ˆå®Œæ•´ï¼Œç†Ÿæ‚‰çš„äººå¯ä»¥å¾ˆå¥½åœ°ä½¿ç”¨å®ƒã€‚ä½†æ˜¯åœ¨é‚£ä¹‹å‰ï¼Œgpg æ··äº‚çš„æ–‡ä»¶èªªæ˜èˆ‡è¤‡é›œçš„æŒ‡ä»¤ï¼Œæ²’æœ‰å¼·å¤§è€å¿ƒçš„äººæ‡‰è©²éƒ½æ²’å‹•åŠ›å¼„æ‡‚ gpgï¼Œå¤šåŠå°±åªæœ‰æ‹¿ä¾† gen key è€Œå·²ã€‚</p>
<h1 id="åƒè€ƒé€£çµ"><a href="#åƒè€ƒé€£çµ" class="headerlink" title="åƒè€ƒé€£çµ"></a>åƒè€ƒé€£çµ</h1><ul>
<li><a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc4880">RFC4880: OpenPgp Message Format</a></li>
<li><a target="_blank" rel="noopener" href="https://davesteele.github.io/gpg/2014/09/20/anatomy-of-a-gpg-key/">Anatomy of a GPG Key</a></li>
<li><a target="_blank" rel="noopener" href="http://jedi.org/blog/archives/gpg_party_zh_tw.html">ä¸­æ–‡ï¼šGnuPG Keysigning Party HOWTO</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/481900853">çŸ¥ä¹ï¼šä½¿ç”¨ GPG Key æ¥æ„å»ºç­¾åã€åŠ å¯†åŠè®¤è¯ä½“ç³»</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24103240">çŸ¥ä¹ï¼šå…³äºGnuPGçš„subkeyï¼ˆå­å¯†é’¥ï¼‰çš„ä½¿ç”¨</a></li>
</ul>


    
</article>


        <div class="article-meta content">
    <div class="groups">
        <span class="group">
            <a class="archive-item-date" href="https://jchu.cc/2022/05/17-gnupg.html">
                <i class="fa fa-calendar"></i>
                <span
                    itemprop="datePublished"
                    content="2022-05-17">2022-05-17</span>
            </a>
        </span>

        <span class="group">
            
            
        </span>

        <span class="group float-right">
            
            
                <a href="/tags/geek/">
                    <span class="tag">geek</span>
                </a>
            
                <a href="/tags/linux/">
                    <span class="tag">linux</span>
                </a>
            
        </span>
    </div>

</div>



    </div>

    <div class="panel-post-nav">
        <div class="box-post-nav">
            
                <a class="btn" href="/2022/06/25-escape_from_nazarick.html" title="Notes of Overlord - Escape from Nazrick"><b>Notes of Overlord - Escape from Nazrick</b> &larr; Prev</a>
            
            
                <a class="btn" href="/2022/04/29-social-network.html" title="Social Network æ˜¯å¦å¯èƒ½æœ‰å¦å¤–ä¸€ç¨®æ¨£è²Œï¼Ÿ">Next &rarr; <b>Social Network æ˜¯å¦å¯èƒ½æœ‰å¦å¤–ä¸€ç¨®æ¨£è²Œï¼Ÿ</b></a>
            
        </div>
    </div>
</div>


        </div>
        
<div class="layout-footer" style="clear: both">
    <div class="panel-footer">
        <div class="box-footer">
            <footer class="footer">
                
                <a target="_blank" rel="noopener" href="http://creativecommons.org/">
                    License: <i class="fa fa-cc"></i> by-nc-sa
                </a>
                
                <p class="theme">Powered by
                    <a href="http://hexo.io/" target="_blank">Hexo</a>,
                    Theme
                    <a href="https://github.com/walkingice/hexo-theme-kaku" target="_blank">Kaku</a>
                </p>
            </footer>
        </div>
    </div>
</div>

<div class="layout-menu-footer">
    <div class="layout-menu-container">

<div class="layout-menu">
    <div class="menu-group">
        <nav>
            <ul class="menu-list">
                
                <li class="menu-item">
                    <a href="/">
                        <i class="fa fa-home gutter-right menu-icon"></i>
                        <span class="menu-item">é¦–é </span>
                    </a>
                </li>
                
                
                <li class="menu-item">
                    <a href="/archives">
                        <i class="fa fa-archive gutter-right"></i>
                        <span class="menu-item">æ–‡ç« å½™æ•´</span>
                    </a>
                </li>
                
                
                <li class="menu-item">
                    <a href="/atom.xml">
                        <i class="fa fa-rss-square gutter-right"></i>
                        <span class="menu-item">RSS</span>
                    </a>
                </li>
                
            </ul>
        </nav>
    </div>

    
    <div class="menu-group">
        <div class="menu-list">
        
            <div class="menu-item">
                <a href="/lamejokes" target="_blank">
                    
                        <i class="fa fa-comment gutter-right"></i>
                    
                å†·è¨€å†·èª
                </a>
            </div>
        
            <div class="menu-item">
                <a href="https://github.com/g0v" target="_blank">
                    
                        <i class="fa fa-compass gutter-right"></i>
                    
                g0v
                </a>
            </div>
        
        </div>
    </div>
    

    
    <div class="extra-comments">
        <div>æœ¬ç«™ç„¡ç•™è¨€åŠŸèƒ½ï¼Œæœ‰å•é¡Œæˆ–ç™¼ç¾éŒ¯èª¤ï¼Œæ­¡è¿åˆ°<a target="_blank" rel="noopener" href="https://twitter.com/walkingice">twitter</a>æˆ³æˆ‘ï¼Œè¬è¬</div>
    </div>
    

    
    <div class="menu-group deflinks">
        <div class="menu-list text-center">
            
            <a href="https://github.com/walkingice" target="_blank">
                <i class="fa fa-github-square gutter-right menu-icononly"></i>
            </a>
            

            
            <a href="https://twitter.com/walkingice" target="_blank">
                <i class="fa fa-twitter-square gutter-right menu-icononly"></i>
            </a>
            

            

            

            

            

            

        </div>
    </div>
    
</div>

</div>


</div>








    </body>
</html>
